'use strict';var winston=require('winston'),config=require('./config').config,logger,sensitiveFields=['cardCode','cardNumber','expirationDate','accountNumber','nameOnAccount','transactionKey','email','phoneNumber','faxNumber','dateOfBirth'];function isJson(a){try{JSON.parse(a)}catch(b){return!1}return!0}!0===config.logger.enabled?(logger=new winston.Logger({transports:[new winston.transports.File({filename:config.logger.location+'/sdk-node.log',level:config.logger.level})]}),logger.filters.push(function(a,b){if(isJson(b))try{return maskSensitiveFields(JSON.parse(b))}catch(d){return'Error while logging the message.'}else return b})):logger=new winston.Logger({transports:[]});function maskSensitiveFields(a){if(a instanceof Object){for(var b in a){var c=-1<sensitiveFields.indexOf(b);!0==c?a[b]=Array(a[b].length+1).join('X'):a.hasOwnProperty(b)&&maskSensitiveFields(a[b])}}return JSON.stringify(a)}module.exports.logger=logger;
