'use strict';var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,'value'in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var request=require('request'),logger=require('./logger.js').logger,config=require('./config').config,constants=require('./constants').constants,APIOperationBase=function(){function a(b){_classCallCheck(this,a),logger.debug('Enter APIOperationBase constructor'),this._request=null,this._response=null,this._endpoint=constants.endpoint.sandbox,null==b&&logger.error('Input request cannot be null'),this._request=b,logger.debug('Exit APIOperationBase constructor')}return _createClass(a,[{key:'validateRequest',value:function validateRequest(){}},{key:'validate',value:function validate(){}},{key:'getResponse',value:function getResponse(){return this._response}},{key:'getResultcode',value:function getResultcode(){var b=null;return this._response&&(b=this._response.resultCode),b}},{key:'getMessagetype',value:function getMessagetype(){var b=null;return this._response&&(b=this._response.message),b}},{key:'beforeExecute',value:function beforeExecute(){}},{key:'setClientId',value:function setClientId(){for(var b in this._request){this._request[b].clientId=config.clientId;break}}},{key:'setEnvironment',value:function setEnvironment(b){this._endpoint=b}},{key:'execute',value:function execute(b){logger.debug('Enter APIOperationBase execute'),logger.debug('Endpoint : '+this._endpoint),this.beforeExecute(),this.setClientId();var c=this;logger.debug(JSON.stringify(this._request,2,null));var d={url:this._endpoint,method:'POST',headers:{'Content-Type':'application/json','Content-Length':this._request.length},json:!0,timeout:config.timeout,body:this._request};config.proxy.setProxy&&(d.proxy=config.proxy.proxyUrl),request(d,function(e,f,g){if(e)logger.error(e);else{var h=JSON.parse(g.slice(1));logger.debug(JSON.stringify(h,2,null)),c._response=h,b()}}),logger.debug('Exit APIOperationBase execute')}}]),a}();module.exports.APIOperationBase=APIOperationBase;
